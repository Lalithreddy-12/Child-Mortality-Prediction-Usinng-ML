<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <title>Child Mortality Prediction</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- Tailwind Play CDN (no build step) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config for dark mode class strategy
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#0ea5a4', // teal-ish
            danger: '#ef4444'
          }
        }
      }
    }
  </script>

  <style>
    /* small extras */
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .circular-chart { display: block; margin: 0 auto; max-width: 120px; transform: rotate(-90deg); }
    .circle-bg { fill: none; stroke: #eee; stroke-width: 3.8; }
    .circle { fill: none; stroke-width: 3.8; stroke-linecap: round; transition: stroke-dasharray 800ms ease; }
    .meter-label { transform: rotate(90deg); } /* correct inner text rotation */
    .animate-fade-up { opacity: 0; transform: translateY(8px); transition: opacity 350ms ease, transform 350ms ease; }
    .animate-fade-up.in { opacity: 1; transform: translateY(0); }
    .plan-card:hover { transform: translateY(-4px); }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 min-h-screen">

  <div class="max-w-3xl mx-auto p-6">
    <header class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl md:text-3xl font-extrabold text-primary">ü©∫ Child Mortality Prediction</h1>
        <p class="text-sm text-gray-600 dark:text-gray-300">Enter the child's features, get a risk probability and a 5-year survival plan generated by the AI.</p>
      </div>

      <div class="flex items-center space-x-3">
        <button id="themeToggle" aria-label="Toggle theme" class="p-2 rounded-md bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700">
          <span id="themeIcon">üåô</span>
        </button>
      </div>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- LEFT: Form Card -->
      <section class="md:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-gray-700">
        <form id="predictForm" class="space-y-4">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <label class="block">
              <span class="text-sm font-medium">Birth weight (kg)</span>
              <input id="birth_weight" type="number" step="0.01" value="2.8" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary"/>
            </label>

            <label class="block">
              <span class="text-sm font-medium">Maternal age (years)</span>
              <input id="maternal_age" type="number" step="0.1" value="26" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary"/>
            </label>

            <label class="block">
              <span class="text-sm font-medium">Immunized</span>
              <select id="immunized" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary">
                <option value="1">Yes (1)</option>
                <option value="0">No (0)</option>
              </select>
            </label>

            <label class="block">
              <span class="text-sm font-medium">Nutrition score (0‚Äì100)</span>
              <input id="nutrition" type="number" step="0.1" value="60" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary"/>
            </label>

            <label class="block">
              <span class="text-sm font-medium">Socioeconomic</span>
              <select id="socioeconomic" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary">
                <option value="0">0 ‚Äî Low</option>
                <option value="1" selected>1 ‚Äî Mid</option>
                <option value="2">2 ‚Äî High</option>
              </select>
            </label>

            <label class="block">
              <span class="text-sm font-medium">Prenatal visits</span>
              <input id="prenatal_visits" type="number" step="1" value="4" class="mt-1 block w-full rounded-lg border px-3 py-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary"/>
            </label>
          </div>

          <div class="flex items-center justify-between mt-2">
            <div class="text-sm text-gray-500">This demo uses a small model ‚Äî validate with real clinical data before production.</div>
            <div class="flex items-center space-x-2">
              <button id="predict" type="button" class="inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg shadow hover:brightness-105 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v8m4-4H8"/></svg>
                Predict
              </button>
              <button id="clear" type="button" class="px-3 py-2 border rounded-lg text-sm bg-transparent hover:bg-gray-50 dark:hover:bg-gray-700">Clear</button>
            </div>
          </div>
        </form>

        <!-- Results area -->
        <div id="resultCard" class="mt-6 hidden bg-gradient-to-r from-white to-gray-50 dark:from-gray-800 dark:to-gray-850 p-4 rounded-xl border border-gray-100 dark:border-gray-700">
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 items-center">
            <!-- Meter -->
            <div class="text-center">
              <svg class="circular-chart" viewBox="0 0 36 36" width="120" height="120" aria-hidden="true">
                <path class="circle-bg" d="M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831"/>
                <path id="meterCircle" class="circle" stroke="#10b981" d="M18 2.0845a 15.9155 15.9155 0 0 1 0 31.831a 15.9155 15.9155 0 0 1 0 -31.831" stroke-dasharray="0, 100"></path>
              </svg>
              <div class="mt-2 text-sm text-gray-600 dark:text-gray-300">AI Confidence</div>
            </div>

            <!-- Summary -->
            <div class="sm:col-span-2">
              <div class="flex items-center justify-between">
                <div>
                  <div id="riskLabel" class="text-lg font-semibold">Risk: ‚Äî</div>
                  <div id="probLabel" class="text-sm text-gray-600 dark:text-gray-300 mt-1">Probability: ‚Äî</div>
                </div>

                <div class="w-48">
                  <div class="text-xs text-gray-500 mb-1">Probability</div>
                  <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
                    <div id="probBar" class="h-3 rounded-full bg-danger" style="width:0%"></div>
                  </div>
                </div>
              </div>

              <div id="explainBtnWrap" class="mt-3">
                <button id="explainBtn" class="text-sm px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700">Explain Prediction</button>
                <div id="explainText" class="mt-2 text-sm text-gray-600 dark:text-gray-300 hidden"></div>
              </div>
            </div>
          </div>

          <hr class="my-4 border-gray-200 dark:border-gray-700" />

          <div id="planContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>
      </section>

      <!-- RIGHT: Helpful tips / legend -->
      <aside class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg border border-gray-100 dark:border-gray-700">
        <h3 class="font-semibold mb-2">Quick Tips</h3>
        <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-2">
          <li>üîé Use the Explain button to view top contributing features (when available).</li>
          <li>üìà Higher probability ‚Üí higher urgency for clinical review.</li>
          <li>üõ°Ô∏è App is for demo purposes only ‚Äî validate clinically before acting.</li>
        </ul>

        <div class="mt-6">
          <h4 class="text-sm font-medium mb-2">Legend</h4>
          <div class="text-xs text-gray-500 dark:text-gray-400">
            <div class="flex items-center gap-2"><span class="inline-block w-3 h-3 bg-red-500 rounded"></span> High risk</div>
            <div class="flex items-center gap-2 mt-1"><span class="inline-block w-3 h-3 bg-yellow-400 rounded"></span> Medium risk</div>
            <div class="flex items-center gap-2 mt-1"><span class="inline-block w-3 h-3 bg-green-500 rounded"></span> Low risk</div>
          </div>
        </div>
      </aside>
    </main>

    <footer class="mt-6 text-center text-xs text-gray-500 dark:text-gray-400">
      <div>Powered by your model ‚Ä¢ Demo only</div>
    </footer>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
